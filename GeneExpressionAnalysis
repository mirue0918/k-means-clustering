from google.colab import files
uploaded = files.upload()

##---

import pandas as pd

filename = 'GSE10072_series_matrix.txt'  ##이름변경

##전처리
with open(filename) as f:
    for i, line in enumerate(f):
        if line.startswith("!series_matrix_table_begin"):
            start = i + 1
        if line.startswith("!series_matrix_table_end"):
            end = i
            break

df = pd.read_csv(filename, sep='\t', skiprows=start, nrows=end-start-1, index_col=0)
df = df.dropna() 
df = df[~df.index.str.startswith('AFFX')]  

##---

from sklearn.cluster import KMeans
import numpy as np

X = df.values  # shape: (genes, samples)

k = 4
kmeans = KMeans(n_clusters=k, random_state=42, n_init='auto')
clusters = kmeans.fit_predict(X)

df['cluster'] = clusters
