from google.colab import files
uploaded = files.upload()

import pandas as pd

file_path = 'GSE10072_series_matrix.txt' ##파일 이름 수정하기 

data = pd.read_csv(file_path, sep='\t', comment='!', index_col=0)
data.head()

import pandas as pd

filename = 'GSE10072_series_matrix.txt'  # 업로드한 파일 이름으로 수정


with open(filename) as f:
    for i, line in enumerate(f):
        if line.startswith("!series_matrix_table_begin"):
            start = i + 1
        if line.startswith("!series_matrix_table_end"):
            end = i
            break

df = pd.read_csv(filename, sep='\t', skiprows=start, nrows=end-start-1, index_col=0)
df = df.dropna()  
df = df[~df.index.str.startswith('AFFX')]  
##전처리 끝

print("데이터 크기:", df.shape)  # (유전자/probe 수, 샘플 수)

from sklearn.cluster import KMeans
import numpy as np

X = df.values  # shape: (genes, samples)

##k값 선정
k = 4
kmeans = KMeans(n_clusters=k, random_state=42, n_init='auto')
clusters = kmeans.fit_predict(X)

df['cluster'] = clusters

for gene in high_expr_genes[:10]:  # 일부만 출력
    print(gene)
